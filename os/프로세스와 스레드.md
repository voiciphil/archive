# 프로세스와 스레드

## 프로세스(Process)
프로세스는 실행 중인 프로그램을 말한다. 프로그램이 실행 중이라는 것은 디스크에 저장되어 있는 프로그램이 메모리에 적재되어 CPU에 의해 연산될 수 있다는 것을 의미한다. 하나의 프로그램을 여러 번 실행하면 여러 개의 프로세스가 된다.

#### 프로세스의 구조
* **코드(텍스트) 영역**: 프로그램의 실행 코드가 저장되는 영역
* **데이터 영역**: 전역 변수 등이 저장되는 영역
* **힙 영역**: 프로그램이 실행 중 동적으로 생성하는 메모리 영역
* **스택 영역**: 함수 호출 시 필요한 임시 데이터(지역 변수, 복귀 주소 등)가 저장되는 영역

#### 프로세스의 상태
* **생성(new)**: 프로세스가 생성되는 중이다.
* **실행(running)**: 프로세스의 명령어가 현재 CPU에 의해 실행되고 있다.
* **대기(waiting)**: 프로세스가 어떤 이벤트(입출력 등)를 기다리고 있는 중이다.
* **준비(ready)**: 프로세스가 CPU를 사용하고 있지 않지만 언제든지 실행 가능하며, CPU 사용을 기다리고 있다.
* **종료(terminated)**: 프로세스가 종료되었다.

#### 프로세스 제어 블록(Process Control Block, PCB)
운영체제는 PCB라는 자료구조를 통해 프로세스의 정보를 저장하고 관리한다. 프로세스의 문맥 교환이 일어날 때 현재 실행 중인 프로세스는 나중에 다시 이어서 실행할 수 있도록 PCB에 상태가 저장된다.

#### PCB에 저장되는 정보
* **프로세스 상태**
* **프로그램 카운터**
* **CPU 레지스터**
* **CPU 스케줄링 정보**
* **메모리 관리 정보**
* **회계 정보**
* **입출력 상태 정보**

## 스레드(Thread)
스레드는 프로세스의 실행 단위이며, CPU 이용의 기본 단위이다. 현대의 운영체제는 한 프로세스가 여러 개의 스레드를 가질 수 있다. 스레드는 스레드 ID, 프로그램 카운터(PC), 레지스터 집합, 스택으로 구성된다. 같은 프로세스에 속한 스레드들은 코드, 데이터 영역, 열린 파일이나 신호와 같은 운영체제 자원들을 공유한다.

#### 멀티 스레딩의 장점
* 시간이 오래 걸리는 연산을 수행할 때 싱글 스레드 프로그램은 잠시 멈추게 되지만 멀티 스레드 프로그램은 연산을 별도의 스레드에서 실행시켜 사용자에게 응답성을 증가시킬 수 있다.
* 프로세스를 생성, 문맥 교환하는 비용보다 스레드를 생성, 문맥 교환하는 비용이 훨씬 경제적이다. 또한 같은 프로세스에 속하는 스레드는 프로세스의 메모리를 별다른 방법 없이 공유할 수 있다.
* 멀티 프로세서 구조에서 여러 스레드가 동시에 실행될 수 있다.

#### 멀티 스레딩의 단점
* 자원 공유가 간편한만큼 자원의 동기화 문제가 쉽게 발생하고, 동기화 문제를 해결하는 과정에서 오버헤드가 발생한다.
* 멀티 스레딩 애플리케이션을 설계하고 작성하는 것은 일반적으로 싱글 스레딩 애플리케이션에 비해 복잡하며, 이는 프로그래머에게 추가적인 부담이 된다.
