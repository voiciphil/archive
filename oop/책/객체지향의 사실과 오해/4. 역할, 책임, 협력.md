# 4. 역할, 책임, 협력

### 책임

* 어떤 객체가 **어떤 요청에 대해 대답해 줄 수 있거나, 적절한 행동을 할 의무가 있는 경우** 해당 객체가 책임을 가진다고 말한다.
* 책임은 `하는 것 ` 과 `아는 것` 으로 구성된다.
  * **하는 것**: 스스로 하는 것, 다른 객체의 행동을 시작시키는 것, 다른 객체의 활동을 제어하고 조절하는 것
  * **아는 것**: 개인적인 정보에 관해 아는 것, 관련된 객체에 관해 아는 것, 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
* 책임은 객체의 **공용 인터페이스**를 구성한다.

### 책임과 메시지

* 객체가 **다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것**을 **메시지 전송**이라고 한다.
* 메시지는 협력을 위해 **한 객체가 다른 객체로 접근할 수 있는 유일한 방법**이다.
* 메시지는 협력에 참여하는 **객체 사이의 관계를 강조**한 것이다.
* 책임이 메시지보다 상위 수준의 개념이다.
  * 일반적으로 책임이 결정되고, 이를 메시지로 변환할 때는 **하나의 책임이 여러 메시지로 분할**된다.
* 객체지향 설계는 협력에 참여하기 위해 **객체가 가져야 할 책임**과 **객체가 어떤 메시지를 어떤 객체로부터 수신할 것인지를 결정하는 것**으로부터 시작된다.

### 역할

* 어떤 객체가 수행하는 **책임의 집합**은 객체가 협력 안에서 수행하는 역할을 암시한다.
* 역할은 협력 내에서 **다른 객체로 대체할 수 있음**을 나타낸다.
  * 역할을 이용해 협력을 추상화하면 **역할을 수행할 수 있는 어떤 객체라도 협력에 참여할 수 있다**.
  * 역할을 대체할 수 있는 객체는 **동일한 메시지를 이해할 수 있는 객체로 한정**된다.
* 역할은 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 구성요소이다.

### 협력의 추상화

* 역할의 가장 큰 가치는 **협력을 추상화**할 수 있다는 것이다.
  * 협력의 추상화는 **구체적인 객체를 추상적인 역할로 대체함**으로써 설계자가 다뤄야 하는 **협력의 개수를 줄이고 협력의 양상을 단순화**한다.
* 협력을 추상화하고 재사용하는 것은 다른 패러다임과 구분되는 객체지향의 힘이다.

### 객체지향에 대한 선입견

* 데이터를 저장하기 위해 객체가 존재하는 것이 아니라 **행위를 수행하면서 협력에 참여하기 위해 객체가 존재**한다.
* 객체지향은 클래스 간의 관계를 표현하는 것이 아니라 **객체가 협력 안에서 어떤 책임과 역할을 수행할 것인지 결정하는 것**이다.

### 객체의 모양을 결정하는 협력

* 올바른 객체를 설계하기 위해선 먼저 **견고하고 깔끔한 협력을 설계**해야한다.
  * 협력을 설계한다는 것은 설계에 참여하는 **객체들이 주고받을 요청과 응답의 흐름을 결정한다는 것**을 의미한다.
* 결정된 요청과 응답의 흐름은 **객체가 수행할 책임**이 된다.
* 객체의 책임이 결정되고 나면 책임은 객체가 외부에 제공하게 될 **행동**이 된다.
* 행동이 결정되고 나면 행동에 필요한 데이터와 클래스의 구현 방법을 결정한다.

### 객체지향 설계 방법

* **책임 주도 설계**
  * 책임 주도 설계는 **시스템의 책임**을 파악하고 **더 작은 책임으로 분할해 적절한 객체나 역할에 책임을 할당**한다.
  * 객체가 책임을 수행하는 도중 **다른 객체의 도움이 필요한 경우** 이를 책임질 역할이나 객체를 찾아 **협력하게 한다**.
* **디자인 패턴**
* **테스트 주도 개발**
  * 테스트 주도 개발의 기본 흐름은 실패하는 테스트를 작성하고, 테스트를 통과하는 간단한 코드를 작성한 뒤, 리팩터링을 하는 과정을 반복한다.
  * 테스트 주도 개발은 객체가 이미 존재한다고 가정하고 **객체에게 어떤 메시지를 전송할 것인지**에 관해 먼저 생각하라고 충고한다는 점에서 의미가 있다.
